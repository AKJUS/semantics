
@diagram[KLayLayered] false
@VHLayout
scchart ComplexFinalStateRoot {
  input bool T1;
  input bool T2;
  output int R1S;
  output int R2S;
  bool _term;
  bool _term2;

  region _Main:

  state _I {

    region _Entry:

    state _Main {

      region "Region 1":

      initial state S1 {

        region _Entry:

        initial state _Init
        --> _Done immediate with / R1S = 1;

        final state _Done;
      }
      >-> _Exit;

      final state S2;

      final state _Aborted;

      state _Exit
      --> _Aborted immediate with _term && _term2
      --> _Pause immediate;

      state _C
      --> S2 immediate with / R1S = 2;

      state _S
      --> _C immediate with / _term = true;

      state _Pause
      --> _Depth;

      state _Depth
      --> _S immediate with T1
      --> _Exit immediate;

      region "Region 2":

      initial state S3 {

        region _Entry:

        initial state _Init
        --> _Done immediate with / R2S = 3;

        final state _Done;
      }
      >-> _Exit;

      state S4 {

        region _Entry:

        initial state _Init
        --> _Done immediate with / R2S = 4;

        final state _Done;
      }
      >-> _Exit2;

      final state _Aborted2;

      state _Exit
      --> _Aborted2 immediate with _term && _term2
      --> _Pause immediate;

      state _Exit2
      --> _Aborted2 immediate with _term && _term2
      --> _Pause2 immediate;

      state _S
      --> S4 immediate with / _term2 = true;

      state _S2
      --> S3 immediate with / _term2 = false;

      state _Pause
      --> _Depth;

      state _Depth
      --> _S immediate with T2
      --> _Exit immediate;

      state _Pause2
      --> _Depth2;

      state _Depth2
      --> _S2 immediate with T2
      --> _Exit2 immediate;
    }
    >-> _Done;

    initial state _Init
    --> _C immediate with / _term = false;

    final state _Done;

    state _C
    --> _Main immediate with / _term2 = false;
  }
  >-> _F immediate;

  final state _F;

  initial state _Init
  --> _C immediate with / R1S = 0;

  state _C
  --> _I immediate with / R2S = 0;
}