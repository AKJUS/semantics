
@diagram[KLayLayered] false
scchart ValuedSignal {
  output bool x;
  output bool y;
  output int x_val combine +;
  int x_curval combine +;
  output int y_val combine +;
  int y_curval combine +;

  region R1:

  initial state S1
  --> _S;

  state _S
  --> _S2 immediate with / x_curval = x_curval + 3;

  state _S2
  --> _Depth immediate with / x = x || true;

  state _Depth
  --> _Depth;

  region R2:

  initial state S3
  --> _S;

  state _S
  --> _S2 immediate with / x_curval = x_curval + 4;

  state _S2
  --> _Depth immediate with / x = x || true;

  state _Depth
  --> _Depth;

  region R3:

  state _S
  --> _S2 immediate with / y_curval = y_curval + x_val;

  state _S2
  --> _Depth2 immediate with / y = y || true;

  initial state S5
  --> _Depth;

  state _Depth
  --> _S immediate with x
  --> S5 immediate;

  state _Depth2
  --> _Depth2;

  region _During:

  state _S
  --> _Depth;

  initial state _Depth
  --> _S3 immediate with / x = false;

  state _S3
  --> _S immediate with / y = false;

  region _During2:

  initial state _Depth
  --> _S2 immediate with x
  --> _Pause immediate;

  state _S
  --> _Depth;

  state _S2
  --> _S immediate with / x_val = x_curval;

  state _Pause
  --> _Depth;

  region _During3:

  initial state _I
  --> _S immediate with / x_curval = 0;

  state _S
  --> _I;

  region _During4:

  initial state _Depth
  --> _S2 immediate with y
  --> _Pause immediate;

  state _S
  --> _Depth;

  state _S2
  --> _S immediate with / y_val = y_curval;

  state _Pause
  --> _Depth;

  region _During5:

  initial state _I
  --> _S immediate with / y_curval = 0;

  state _S
  --> _I;
}