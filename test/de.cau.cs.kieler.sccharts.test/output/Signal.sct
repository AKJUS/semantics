
@diagram[KLayLayered] false
scchart Signal {
  output bool S;
  output bool A1;
  output bool A2;

  region _Entry:

  state _Main {

    region R1:

    initial state S1
    --> _S;

    state _S
    --> _S2 immediate with / S = S || true;

    state _S2
    --> _Depth immediate with / A2 = true;

    state _Depth
    --> _Depth;

    region R2:

    state _S
    --> _Depth2 immediate with / A1 = true;

    initial state S3
    --> _Depth;

    state _Depth
    --> _S immediate with S
    --> S3 immediate;

    state _Depth2
    --> _Depth2;

    region _During:

    initial state _I
    --> _S immediate with / S = false;

    state _S
    --> _I;
  }
  >-> _Done;

  initial state _Init
  --> _C immediate with / A1 = false;

  final state _Done;

  state _C
  --> _Main immediate with / A2 = false;
}